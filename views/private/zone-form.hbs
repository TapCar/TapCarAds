<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.9/mapbox-gl-draw.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-draw/v1.0.9/mapbox-gl-draw.css'
  type='text/css' />


    <section class="uk-section-small">
      <div class="uk-container uk-container-large">
        <form action="" method="POST">
          <div class="uk-input-default uk margin-remove">
            <input id="zoneName" class="uk-input" type="text" name="name" placeholder="Zone name" value="{{zone.name}}"
              required>
          </div>
          <div id='map' style='width: 100%; height: 450px;'></div>
          <div class="uk-flex uk-flex-center uk-margin">
            <div class="uk-margin">
              <div class="uk-inline">
                <button id="zoneBtn" class="uk-button uk-button-primary" style="background-color: #9b59b6; border-radius: 20px" type="submit">
                  {{#if zone}}
                  Edit Zone
                  {{else}}
                  Create zone
                  {{/if}}
                </button>
              </div>
            </div>
          </div>
        </form>
        {{#if err}}
        <div class="uk-alert-danger uk-width-1-3 uk-margin-auto uk-text-center" uk-alert>
          <p>{{err}}</p>
        </div>
        {{/if}}
      </div>
    </section>


<script src="/javascripts/ZoneHandler.js"></script>
<script>
  let zoneId="{{zone._id}}";
  const redirectUrl = "{{redirectUrl}}";
  //Transform data from handle bats into a useful coordinates array
  let cadena = "{{zone.area.coordinates}}";
  let coordinates = [];
  let aux = cadena.split(",");
  for (let index = 0; index < aux.length; index += 2) {
    let coord = [];
    coord.push(parseFloat(aux[index]));
    coord.push(parseFloat(aux[index + 1]));
    coordinates.push(coord);
  }
  console.log(coordinates);
  coordinates = [[...coordinates]];
</script>
<script src="/javascripts/zoneForm.js"></script>