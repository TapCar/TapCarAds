{{!-- <div width="100%" height="50px">
<a class="uk-button uk-button-default uk-button-small" href="/dashboard">Back</a>
</div> --}}

{{!-- <div class="uk-flex"> --}}
  <div>

    <div>

      <div>
        <h2 class="uk-heading uk-flex uk-flex-center">
        {{#if property}}
        Edit Campaign
        {{else}}
        Create Campaign
        {{/if}}
        </h2>
        {{#if err.message}}
        <div class="uk-alert-danger uk-width-1-3 uk-margin-auto" uk-alert>
          <p>{{err.message}}</p>
        </div>
        {{/if}}
      </div>

      <div>
      {{!-- <div class="uk-flex uk-flex-center" id="search"></div> --}}
      </div>

    </div>

    <div class="uk-column-1-2 uk-column-divider">
      <div class="uk-flex uk-flex-center">
        <form  {{#if campaign}} action="/campaign/{{campaign._id}}/edit" {{else}} action="/campaign/new" {{/if}} class="uk-flex-bottom uk-text-center uk-form-width-large" enctype="multipart/form-data" method="POST">
                
          <div class="uk-margin">
            <div>
              <span class="uk-form-icon" uk-icon="icon: cart"></span>
              <input name="campaignName" type="text" class="uk-input" placeholder="Enter campaign name" value="{{campaign.campaignName}}" required>
            </div>
          </div>

          <div class="uk-margin">
            <div>
              <span class="uk-form-icon" uk-icon="icon: calendar"></span>
              <select name="zone" type="text" class="uk-select" placeholder="Select geo-segmentation" value="{{campaign.zones}}" required>
                  {{#if zones}}
                  {{#selectOption zones campId=campaign.zone}}
                  {{this}}
                  {{/selectOption}}
                  {{else}}
                  <option>Create a zone first</option>
                  {{/if}}
              </select>
            </div>
          </div> 
        
          <div class="uk-margin">
            <div>
              <span class="uk-form-icon" uk-icon="icon: calendar"></span>
              <input name="startDate" type="date" class="uk-input" placeholder="Enter campaign start date" value="{{campaign.startDate}}" required>
            </div>
          </div>
       
          <div class="uk-margin">
            <div>
              <span class="uk-form-icon" uk-icon="icon: calendar"></span>
              <input name="endDate" type="date" class="uk-input" placeholder="Enter campaign end date" value="{{campaign.endDate}}" required>
            </div>
          </div>
       
          <div class="uk-margin">
            <div>
              <span class="uk-form-icon" uk-icon="icon: cart"></span>
              <input  name="playsPerHour" type="number" class="uk-input" placeholder="Type plays per hour for your ad" value="{{campaign.playsPerHour}}" required>
            </div>
          </div>
          <div class="uk-margin">
            <div>
              <div uk-form-custom="target: true">
                <input type="file" name="ads" multiple required>
                <input class="uk-input uk-form-width-medium" type="text" placeholder="Select your ad" disabled>
              </div>
                
          </div>
          </div>
          
          <div>
            <button class="uk-button uk-button-primary">
              {{#if campaign}}
              Edit campaign
              {{else}}
              Save campaign
              {{/if}}
            </button>
          </div>

        </form>
      </div>

      <div>
       <section class="uk-section-small uk-padding-remove-vertical	uk-flex uk-flex-center">
        <div class="uk-container">
          <h2></h2>
          <h2></h2>
          <div id='map' style='width: 550px; height: 350px;'></div>
          <a href="/zones/new" class="uk-button uk-button-primary">Add Zone</a>
        </div>
        {{#if err}}
        <div class="uk-alert-danger uk-width-1-3 uk-margin-auto" uk-alert>
          <p>{{err}}</p>
        </div>
        {{/if}}
      </section>
      </div>

    </div>

  </div>
    
{{!-- </div> --}}
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />
<script src="/javascripts/ZoneHandler.js"></script>
<script>
  {{!-- Handle Bars process to retrieve ids --}}
  let ids = [];
  {{#each zones as | zone |}}
    ids.push("{{zone.id}}");
  {{/each}}
</script>
<script src="/javascripts/zonesView.js"></script>
<script>
    

  const address = document.getElementById("address");
  const lat = document.getElementById("lat");
  const lng = document.getElementById("lng");
  mapboxgl.accessToken = 'pk.eyJ1IjoiY3J1c2VkbW9zcyIsImEiOiJjanUwYWJpcTIwMGlxNDRxbnVrbzRlZ2ZwIn0.JFaXPkdL0AJ7Vbtyc8lD4A';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v10',
    center: [-99.132343, 19.432305],
    zoom: 8;
  });

map.addControl(new mapboxgl.GeolocateControl({
      positionOptions: {
      enableHighAccuracy: true
      },
      trackUserLocation: true
    }));



  const geocoder = new MapboxGeocoder({
    accessToken: mapboxgl.accessToken
  })
  document.getElementById("search").appendChild(geocoder.onAdd(map))
  geocoder.on("result", (e) => {
    console.log(e.result)
    address.value = e.result.place_name;
    lat.value = e.result.center[0];
    lng.value = e.result.center[1];
  })
</script>


