<script type="text/javascript" src="/socket.io/socket.io.js"></script>

<img id="displayed_image" width="100%" height="100%" style="padding:0px" src="" alt="">

<script>
  var socket = io();
  socket.emit('connected')

  function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(createLocation);
  } else {
   console.log("Geolocation is not supported by this browser.");
  }
}
getLocation()

function createLocation(position) {
    lat = position.coords.latitude
    lng = position.coords.longitude
   console.log(lat, lng)
   socket.on('getLocation', function(){
     socket.emit('location', lat, lng)
   }) 
}

socket.on('display', function(){
      socket.emit('play', function(ad){
        document.getElementById('displayed_image').setAttribute('src', ad)
      })
})

setTimeout(function() {
  window.location.href = window.location;
}, 30000);

</script>
